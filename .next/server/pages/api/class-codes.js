"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/class-codes";
exports.ids = ["pages/api/class-codes"];
exports.modules = {

/***/ "next-auth/next":
/*!*********************************!*\
  !*** external "next-auth/next" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("next-auth/next");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "(api)/./pages/api/class-codes/index.js":
/*!****************************************!*\
  !*** ./pages/api/class-codes/index.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/next */ \"next-auth/next\");\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_next__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _services_database_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../services/database.mjs */ \"(api)/./services/database.mjs\");\n\n\nasync function handler(req, res) {\n    const session = await (0,next_auth_next__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(req, res);\n    if (req.method === \"GET\") {\n        console.log(\"Session contains\", session);\n        if (!session) {\n            res.status(401).json(\"Unauthorized\");\n        }\n        const classCodes = await _services_database_mjs__WEBPACK_IMPORTED_MODULE_1__.getClassCodes(session.user.name);\n        res.status(200).json(classCodes);\n    } else if (req.method === \"POST\") {\n        if (!session) {\n            return res.status(401).json(\"Unauthorized\");\n        }\n        const data = req.body;\n        if (!data.id) {\n            return res.status(400).json({\n                message: \"Mising id field\"\n            });\n        }\n        const classCode = await _services_database_mjs__WEBPACK_IMPORTED_MODULE_1__.createClassCode({\n            id: data.id,\n            owner: session.user.name\n        });\n        return res.status(201).json(classCode);\n    } else if (req.method === \"DELETE\") {\n        if (!session) {\n            return res.status(401).json(\"Unauthorized\");\n        }\n        const data1 = req.body;\n        if (!data1.id) {\n            return res.status(400).json({\n                message: \"Mising id field\"\n            });\n        }\n        const classCode1 = await _services_database_mjs__WEBPACK_IMPORTED_MODULE_1__.deleteClassCode(data1.id);\n        return res.status(200).json(classCode1);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvY2xhc3MtY29kZXMvaW5kZXguanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFrRDtBQUNHO0FBRXRDLGVBQWVFLE9BQU8sQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUU7SUFDNUMsTUFBTUMsT0FBTyxHQUFHLE1BQU1MLGdFQUFnQixDQUFDRyxHQUFHLEVBQUVDLEdBQUcsQ0FBQztJQUVoRCxJQUFJRCxHQUFHLENBQUNHLE1BQU0sS0FBSyxLQUFLLEVBQUU7UUFDdEJDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGtCQUFrQixFQUFFSCxPQUFPLENBQUM7UUFFeEMsSUFBSSxDQUFDQSxPQUFPLEVBQUU7WUFDVkQsR0FBRyxDQUFDSyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUN6QyxDQUFDO1FBQ0QsTUFBTUMsVUFBVSxHQUFHLE1BQU1WLGlFQUFnQixDQUFDSSxPQUFPLENBQUNRLElBQUksQ0FBQ0MsSUFBSSxDQUFDO1FBQzVEVixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDQyxVQUFVLENBQUMsQ0FBQztJQUNyQyxPQUFPLElBQUlSLEdBQUcsQ0FBQ0csTUFBTSxLQUFLLE1BQU0sRUFBRTtRQUM5QixJQUFJLENBQUNELE9BQU8sRUFBRTtZQUNWLE9BQU9ELEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUMsY0FBYyxDQUFDO1FBQy9DLENBQUM7UUFDRCxNQUFNSyxJQUFJLEdBQUdaLEdBQUcsQ0FBQ2EsSUFBSTtRQUNyQixJQUFJLENBQUNELElBQUksQ0FBQ0UsRUFBRSxFQUFFO1lBQ1YsT0FBT2IsR0FBRyxDQUFDSyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztnQkFBQ1EsT0FBTyxFQUFFLGlCQUFpQjthQUFDLENBQUM7UUFDN0QsQ0FBQztRQUNELE1BQU1DLFNBQVMsR0FBRyxNQUFNbEIsbUVBQWtCLENBQUM7WUFBQ2dCLEVBQUUsRUFBRUYsSUFBSSxDQUFDRSxFQUFFO1lBQUVJLEtBQUssRUFBRWhCLE9BQU8sQ0FBQ1EsSUFBSSxDQUFDQyxJQUFJO1NBQUMsQ0FBQztRQUNuRixPQUFPVixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDUyxTQUFTLENBQUM7SUFDMUMsT0FBTyxJQUFJaEIsR0FBRyxDQUFDRyxNQUFNLEtBQUssUUFBUSxFQUFFO1FBQ2hDLElBQUksQ0FBQ0QsT0FBTyxFQUFFO1lBQ1YsT0FBT0QsR0FBRyxDQUFDSyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxjQUFjLENBQUM7UUFDL0MsQ0FBQztRQUNELE1BQU1LLEtBQUksR0FBR1osR0FBRyxDQUFDYSxJQUFJO1FBQ3JCLElBQUksQ0FBQ0QsS0FBSSxDQUFDRSxFQUFFLEVBQUU7WUFDVixPQUFPYixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO2dCQUFDUSxPQUFPLEVBQUUsaUJBQWlCO2FBQUMsQ0FBQztRQUM3RCxDQUFDO1FBQ0QsTUFBTUMsVUFBUyxHQUFHLE1BQU1sQixtRUFBa0IsQ0FBQ2MsS0FBSSxDQUFDRSxFQUFFLENBQUM7UUFDbkQsT0FBT2IsR0FBRyxDQUFDSyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ1MsVUFBUyxDQUFDO0lBQzFDLENBQUM7QUFDTCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJvamVjdC8uL3BhZ2VzL2FwaS9jbGFzcy1jb2Rlcy9pbmRleC5qcz85NmJiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldFNlcnZlclNlc3Npb24gfSBmcm9tIFwibmV4dC1hdXRoL25leHRcIjtcbmltcG9ydCAqIGFzIGRiIGZyb20gXCIuLi8uLi8uLi9zZXJ2aWNlcy9kYXRhYmFzZS5tanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKHJlcSwgcmVzKTtcblxuICAgIGlmIChyZXEubWV0aG9kID09PSBcIkdFVFwiKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiU2Vzc2lvbiBjb250YWluc1wiLCBzZXNzaW9uKVxuXG4gICAgICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oXCJVbmF1dGhvcml6ZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2xhc3NDb2RlcyA9IGF3YWl0IGRiLmdldENsYXNzQ29kZXMoc2Vzc2lvbi51c2VyLm5hbWUpXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGNsYXNzQ29kZXMpO1xuICAgIH0gZWxzZSBpZiAocmVxLm1ldGhvZCA9PT0gXCJQT1NUXCIpIHtcbiAgICAgICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oXCJVbmF1dGhvcml6ZWRcIilcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhID0gcmVxLmJvZHlcbiAgICAgICAgaWYgKCFkYXRhLmlkKSB7IFxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHttZXNzYWdlOiBcIk1pc2luZyBpZCBmaWVsZFwifSlcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjbGFzc0NvZGUgPSBhd2FpdCBkYi5jcmVhdGVDbGFzc0NvZGUoe2lkOiBkYXRhLmlkLCBvd25lcjogc2Vzc2lvbi51c2VyLm5hbWV9KVxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oY2xhc3NDb2RlKVxuICAgIH0gZWxzZSBpZiAocmVxLm1ldGhvZCA9PT0gXCJERUxFVEVcIikge1xuICAgICAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbihcIlVuYXV0aG9yaXplZFwiKVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGEgPSByZXEuYm9keVxuICAgICAgICBpZiAoIWRhdGEuaWQpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7bWVzc2FnZTogXCJNaXNpbmcgaWQgZmllbGRcIn0pXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2xhc3NDb2RlID0gYXdhaXQgZGIuZGVsZXRlQ2xhc3NDb2RlKGRhdGEuaWQpXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihjbGFzc0NvZGUpXG4gICAgfVxufSJdLCJuYW1lcyI6WyJnZXRTZXJ2ZXJTZXNzaW9uIiwiZGIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwic2Vzc2lvbiIsIm1ldGhvZCIsImNvbnNvbGUiLCJsb2ciLCJzdGF0dXMiLCJqc29uIiwiY2xhc3NDb2RlcyIsImdldENsYXNzQ29kZXMiLCJ1c2VyIiwibmFtZSIsImRhdGEiLCJib2R5IiwiaWQiLCJtZXNzYWdlIiwiY2xhc3NDb2RlIiwiY3JlYXRlQ2xhc3NDb2RlIiwib3duZXIiLCJkZWxldGVDbGFzc0NvZGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/class-codes/index.js\n");

/***/ }),

/***/ "(api)/./services/database.mjs":
/*!*******************************!*\
  !*** ./services/database.mjs ***!
  \*******************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"clear\": () => (/* binding */ clear),\n/* harmony export */   \"createClassCode\": () => (/* binding */ createClassCode),\n/* harmony export */   \"createQuestionForClassCode\": () => (/* binding */ createQuestionForClassCode),\n/* harmony export */   \"deleteClassCode\": () => (/* binding */ deleteClassCode),\n/* harmony export */   \"deleteQuestion\": () => (/* binding */ deleteQuestion),\n/* harmony export */   \"getClassCodes\": () => (/* binding */ getClassCodes),\n/* harmony export */   \"getQuestions\": () => (/* binding */ getQuestions),\n/* harmony export */   \"openDb\": () => (/* binding */ openDb)\n/* harmony export */ });\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n\n/*\nCS5356 TODO 2a. Data Model\n\nFill in the methods below that will create,\nread, update, and delete data.\n\nAll the data will be stored in ./db.json so you can view\nwhat your data looks like locally.\n*/ const openDb = async ()=>{\n    // CS5356 TODO 2a Set the initial structure of your database here\n    // @type {dbObject}\n    let dbObject = {\n        // Fill in collections\n        classCodes: [],\n        questions: {}\n    };\n    // Don't edit below this line.\n    try {\n        const text = await fs_promises__WEBPACK_IMPORTED_MODULE_0__.readFile(\"./db.json\");\n        return JSON.parse(text);\n    } catch (err) {\n        await saveData(dbObject);\n        return dbObject;\n    }\n};\nconst getQuestions = async (classCode)=>{\n    const dbObject = await openDb();\n    // Fill in below\n    return dbObject.questions[classCode] || [];\n};\nconst getClassCodes = async (username)=>{\n    const dbObject = await openDb();\n    // Fill in below\n    return dbObject.classCodes.filter((classCode)=>classCode.owner === username);\n};\nconst createQuestionForClassCode = async (classCode, question)=>{\n    const dbObject = await openDb();\n    // Fill in below\n    const q = {\n        id: Date.now().toString(),\n        createdAt: Date.now(),\n        ...question\n    };\n    if (!dbObject.classCodes.some((cc)=>cc.id === classCode)) {\n        //console.log(\"Class code not found:\", classCode);\n        return null;\n    }\n    if (!dbObject.questions[classCode]) {\n        dbObject.questions[classCode] = [];\n    }\n    dbObject.questions[classCode].push(q);\n    await saveData(dbObject);\n    console.log(\"Question added:\", q);\n    return q;\n};\nconst createClassCode = async ({ id , owner  })=>{\n    const dbObject = await openDb();\n    // Fill in below\n    const newClassCode = {\n        id: id,\n        createdAt: Date.now(),\n        owner: owner\n    };\n    dbObject.classCodes.push(newClassCode);\n    await saveData(dbObject);\n    return newClassCode;\n};\nconst deleteClassCode = async (classCode)=>{\n    const dbObject = await openDb();\n    const initialLength = dbObject.classCodes.length;\n    dbObject.classCodes = dbObject.classCodes.filter((cc)=>cc.id !== classCode);\n    if (initialLength !== dbObject.classCodes.length) {\n        await saveData(dbObject);\n    }\n};\nconst deleteQuestion = async (questionId)=>{\n    const dbObject = await openDb();\n    // Fill in below\n    let exist = false;\n    Object.keys(dbObject.questions).forEach((classCode)=>{\n        const initialLength = dbObject.questions[classCode].length;\n        dbObject.questions[classCode] = dbObject.questions[classCode].filter((q)=>q.id !== questionId);\n        if (dbObject.questions[classCode].length !== initialLength) {\n            exist = true;\n        }\n    });\n    if (exist) {\n        await saveData(dbObject);\n    }\n};\n// -------------------------------\n// Do not edit the functions below\nconst saveData = async (dbObject)=>{\n    await fs_promises__WEBPACK_IMPORTED_MODULE_0__.writeFile(\"./db.json\", JSON.stringify(dbObject));\n};\nconst clear = async ()=>{\n    try {\n        await fs_promises__WEBPACK_IMPORTED_MODULE_0__.rm(\"./db.json\");\n    } catch (err) {} // ignore error if file doesnt exist\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLRCxhQUFhLEVBQUU7WUFDeERJLEtBQUssR0FBRyxJQUFJLENBQUM7UUFDakIsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ0gsSUFBSUEsS0FBSyxFQUFFO1FBQ1AsTUFBTTNCLFFBQVEsQ0FBQ1IsUUFBUSxDQUFDLENBQUM7SUFDN0IsQ0FBQztBQUNILENBQUM7QUFFRCxrQ0FBa0M7QUFDbEMsa0NBQWtDO0FBQ2xDLE1BQU1RLFFBQVEsR0FBRyxPQUFPUixRQUFRLEdBQUs7SUFDbkMsTUFBTUYsa0RBQW9CLENBQUMsV0FBVyxFQUFFTyxJQUFJLENBQUNtQyxTQUFTLENBQUN4QyxRQUFRLENBQUMsQ0FBQztBQUNuRSxDQUFDO0FBRU0sTUFBTXlDLEtBQUssR0FBRyxVQUFZO0lBQy9CLElBQUk7UUFDRixNQUFNM0MsMkNBQWEsQ0FBQyxXQUFXLENBQUM7SUFDbEMsRUFBRSxPQUFNUyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsb0NBQW9DO0FBQ3RELENBQUMsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Byb2plY3QvLi9zZXJ2aWNlcy9kYXRhYmFzZS5tanM/NzNhYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZnNQcm9taXNlcyBmcm9tICdmcy9wcm9taXNlcydcblxuLypcbkNTNTM1NiBUT0RPIDJhLiBEYXRhIE1vZGVsXG5cbkZpbGwgaW4gdGhlIG1ldGhvZHMgYmVsb3cgdGhhdCB3aWxsIGNyZWF0ZSxcbnJlYWQsIHVwZGF0ZSwgYW5kIGRlbGV0ZSBkYXRhLlxuXG5BbGwgdGhlIGRhdGEgd2lsbCBiZSBzdG9yZWQgaW4gLi9kYi5qc29uIHNvIHlvdSBjYW4gdmlld1xud2hhdCB5b3VyIGRhdGEgbG9va3MgbGlrZSBsb2NhbGx5LlxuKi9cblxuZXhwb3J0IGNvbnN0IG9wZW5EYiA9IGFzeW5jICgpID0+IHtcbiAgLy8gQ1M1MzU2IFRPRE8gMmEgU2V0IHRoZSBpbml0aWFsIHN0cnVjdHVyZSBvZiB5b3VyIGRhdGFiYXNlIGhlcmVcbiAgLy8gQHR5cGUge2RiT2JqZWN0fVxuICBsZXQgZGJPYmplY3QgPSB7XG4gICAgLy8gRmlsbCBpbiBjb2xsZWN0aW9uc1xuICAgIGNsYXNzQ29kZXM6IFtdLFxuICAgIHF1ZXN0aW9uczoge31cbiAgfVxuXG4gIC8vIERvbid0IGVkaXQgYmVsb3cgdGhpcyBsaW5lLlxuICB0cnkge1xuICAgIGNvbnN0IHRleHQgPSBhd2FpdCBmc1Byb21pc2VzLnJlYWRGaWxlKCcuL2RiLmpzb24nKVxuICAgIHJldHVybiBKU09OLnBhcnNlKHRleHQpXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGF3YWl0IHNhdmVEYXRhKGRiT2JqZWN0KVxuICAgIHJldHVybiBkYk9iamVjdFxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBnZXRRdWVzdGlvbnMgPSBhc3luYyAoY2xhc3NDb2RlKSA9PiB7XG4gIGNvbnN0IGRiT2JqZWN0ID0gYXdhaXQgb3BlbkRiKClcblxuICAvLyBGaWxsIGluIGJlbG93XG4gIHJldHVybiBkYk9iamVjdC5xdWVzdGlvbnNbY2xhc3NDb2RlXSB8fCBbXTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRDbGFzc0NvZGVzID0gYXN5bmMgKHVzZXJuYW1lKSA9PiB7XG4gIGNvbnN0IGRiT2JqZWN0ID0gYXdhaXQgb3BlbkRiKClcblxuICAvLyBGaWxsIGluIGJlbG93XG4gIHJldHVybiBkYk9iamVjdC5jbGFzc0NvZGVzLmZpbHRlcihjbGFzc0NvZGUgPT4gY2xhc3NDb2RlLm93bmVyID09PSB1c2VybmFtZSlcbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVF1ZXN0aW9uRm9yQ2xhc3NDb2RlID0gYXN5bmMgKGNsYXNzQ29kZSwgcXVlc3Rpb24pID0+IHtcbiAgY29uc3QgZGJPYmplY3QgPSBhd2FpdCBvcGVuRGIoKVxuXG4gIC8vIEZpbGwgaW4gYmVsb3dcbiAgY29uc3QgcSA9IHtcbiAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLCAvLyBFbnN1cmluZyBlYWNoIHF1ZXN0aW9uIGhhcyBhIHVuaXF1ZSBJRFxuICAgIGNyZWF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAuLi5xdWVzdGlvblxuICB9O1xuICBpZiAoIWRiT2JqZWN0LmNsYXNzQ29kZXMuc29tZShjYyA9PiBjYy5pZCA9PT0gY2xhc3NDb2RlKSkge1xuICAgICAgLy9jb25zb2xlLmxvZyhcIkNsYXNzIGNvZGUgbm90IGZvdW5kOlwiLCBjbGFzc0NvZGUpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKCFkYk9iamVjdC5xdWVzdGlvbnNbY2xhc3NDb2RlXSkge1xuICAgICAgZGJPYmplY3QucXVlc3Rpb25zW2NsYXNzQ29kZV0gPSBbXTtcbiAgfVxuICBcbiAgZGJPYmplY3QucXVlc3Rpb25zW2NsYXNzQ29kZV0ucHVzaChxKTtcbiAgYXdhaXQgc2F2ZURhdGEoZGJPYmplY3QpO1xuICBjb25zb2xlLmxvZyhcIlF1ZXN0aW9uIGFkZGVkOlwiLCBxKTtcbiAgcmV0dXJuIHE7XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlQ2xhc3NDb2RlID0gYXN5bmMgKHtpZCwgb3duZXJ9KSA9PiB7XG4gIGNvbnN0IGRiT2JqZWN0ID0gYXdhaXQgb3BlbkRiKClcbiAgLy8gRmlsbCBpbiBiZWxvd1xuICBjb25zdCBuZXdDbGFzc0NvZGUgPSB7XG4gICAgaWQ6IGlkLFxuICAgIGNyZWF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICBvd25lcjogb3duZXJcbiAgfVxuICBkYk9iamVjdC5jbGFzc0NvZGVzLnB1c2gobmV3Q2xhc3NDb2RlKVxuXG4gIGF3YWl0IHNhdmVEYXRhKGRiT2JqZWN0KVxuICByZXR1cm4gbmV3Q2xhc3NDb2RlXG59O1xuXG5leHBvcnQgY29uc3QgZGVsZXRlQ2xhc3NDb2RlID0gYXN5bmMgKGNsYXNzQ29kZSkgPT4ge1xuICBjb25zdCBkYk9iamVjdCA9IGF3YWl0IG9wZW5EYigpIFxuICBjb25zdCBpbml0aWFsTGVuZ3RoID0gZGJPYmplY3QuY2xhc3NDb2Rlcy5sZW5ndGg7IFxuICBkYk9iamVjdC5jbGFzc0NvZGVzID0gZGJPYmplY3QuY2xhc3NDb2Rlcy5maWx0ZXIoY2MgPT4gY2MuaWQhPT0gY2xhc3NDb2RlKTtcbiAgaWYgKGluaXRpYWxMZW5ndGghPT0gZGJPYmplY3QuY2xhc3NDb2Rlcy5sZW5ndGgpIHtcbiAgICAgIGF3YWl0IHNhdmVEYXRhKGRiT2JqZWN0KTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgZGVsZXRlUXVlc3Rpb24gPSBhc3luYyAocXVlc3Rpb25JZCkgPT4ge1xuICBjb25zdCBkYk9iamVjdCA9IGF3YWl0IG9wZW5EYigpXG5cbiAgLy8gRmlsbCBpbiBiZWxvd1xuICBsZXQgZXhpc3QgPSBmYWxzZTtcbiAgT2JqZWN0LmtleXMoZGJPYmplY3QucXVlc3Rpb25zKS5mb3JFYWNoKGNsYXNzQ29kZSA9PiB7XG4gICAgICBjb25zdCBpbml0aWFsTGVuZ3RoID0gZGJPYmplY3QucXVlc3Rpb25zW2NsYXNzQ29kZV0ubGVuZ3RoO1xuICAgICAgZGJPYmplY3QucXVlc3Rpb25zW2NsYXNzQ29kZV0gPSBkYk9iamVjdC5xdWVzdGlvbnNbY2xhc3NDb2RlXS5maWx0ZXIocSA9PiBxLmlkICE9PSBxdWVzdGlvbklkKTtcbiAgICAgIGlmIChkYk9iamVjdC5xdWVzdGlvbnNbY2xhc3NDb2RlXS5sZW5ndGggIT09IGluaXRpYWxMZW5ndGgpIHtcbiAgICAgICAgICBleGlzdCA9IHRydWU7XG4gICAgICB9XG4gIH0pO1xuICBpZiAoZXhpc3QpIHtcbiAgICAgIGF3YWl0IHNhdmVEYXRhKGRiT2JqZWN0KTtcbiAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBEbyBub3QgZWRpdCB0aGUgZnVuY3Rpb25zIGJlbG93XG5jb25zdCBzYXZlRGF0YSA9IGFzeW5jIChkYk9iamVjdCkgPT4ge1xuICBhd2FpdCBmc1Byb21pc2VzLndyaXRlRmlsZSgnLi9kYi5qc29uJywgSlNPTi5zdHJpbmdpZnkoZGJPYmplY3QpKVxufVxuXG5leHBvcnQgY29uc3QgY2xlYXIgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgZnNQcm9taXNlcy5ybSgnLi9kYi5qc29uJylcbiAgfSBjYXRjaChlcnIpIHt9IC8vIGlnbm9yZSBlcnJvciBpZiBmaWxlIGRvZXNudCBleGlzdFxufTsiXSwibmFtZXMiOlsiZnNQcm9taXNlcyIsIm9wZW5EYiIsImRiT2JqZWN0IiwiY2xhc3NDb2RlcyIsInF1ZXN0aW9ucyIsInRleHQiLCJyZWFkRmlsZSIsIkpTT04iLCJwYXJzZSIsImVyciIsInNhdmVEYXRhIiwiZ2V0UXVlc3Rpb25zIiwiY2xhc3NDb2RlIiwiZ2V0Q2xhc3NDb2RlcyIsInVzZXJuYW1lIiwiZmlsdGVyIiwib3duZXIiLCJjcmVhdGVRdWVzdGlvbkZvckNsYXNzQ29kZSIsInF1ZXN0aW9uIiwicSIsImlkIiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwiY3JlYXRlZEF0Iiwic29tZSIsImNjIiwicHVzaCIsImNvbnNvbGUiLCJsb2ciLCJjcmVhdGVDbGFzc0NvZGUiLCJuZXdDbGFzc0NvZGUiLCJkZWxldGVDbGFzc0NvZGUiLCJpbml0aWFsTGVuZ3RoIiwibGVuZ3RoIiwiZGVsZXRlUXVlc3Rpb24iLCJxdWVzdGlvbklkIiwiZXhpc3QiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsIndyaXRlRmlsZSIsInN0cmluZ2lmeSIsImNsZWFyIiwicm0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./services/database.mjs\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/class-codes/index.js"));
module.exports = __webpack_exports__;

})();